# Домашнее задание №3

## Замеряемая сущность
Для замеров производительности была выбрана сущность постов, так как это основная сущность, которую пользователи социальной сети ежедневно просматривают и создают.

## Инструмент для проведения нагрузочного тестирования
Для замеров производительности используется утилита Apache JMeter. Перед замерами на сервер отправляется запрос для авторизации и получении куки `session` для того, чтобы была возможнсть создавать посты и просматривать ленту. Запрос на создание поста отправляется с Content-Type: multipart/form-data, так как пользователь может загружать картинки. В целях экономии памяти машины, нагрузочное тестирование на создание поста проводилось только с написанием текста поста, без испоьзования картинок

Полный файл с конфигом (.jmx) для запуска нагрузочного теста будет лежать в директории perf_test/

Так же для генерации текста использовался pyhton скрипт, который генерировал 100 тыс записей с рандомным текстом в csv-файл. При локальном запуске нагрузочного тестирования в модуле CSV Data Set Config необходимо будет указать пусть до файла generated_texts.csv

В хедере передается `session` для того чтобы сервер мог определить пользователя и его права.

График с распределением времени запросов будет лежать в директории perf_test/

## 1. Тестирование создание поста (наполнение базы данных)
- URL: https://quickflowapp.ru/api/post
- Параметры теста:
    - Потоки: 100
    - Длительность: 1000 секунд
- Результаты:
    - Средняя задержка: 58 мс
    - Максимальная задержка: 3.865 сек
    - Минимальная задержка: 7 мс
    - Запросов в секунду (RPS, Throughput в JMeter): 99.2
    - Стандартное отклонение (Sd Dev) - 189.71
    - Всего запросов: 100001 за 16 минут 48 секунд
    - Ошибки: 0

Вывод:  
API выдерживает длительную нагрузку с высокой интенсивностью (~100 RPS). Задержки остаются стабильными, несмотря на большой объем данных, подаваемых на сервис.


## 2. Тестирование создание поста (наполнение базы данных)
- URL: https://quickflowapp.ru/api/recommendations?posts_count=10
- Параметры теста:
    - Потоки: 10
    - Длительность: 10 секунд
- Результаты:
    - Средняя задержка: 529 мс
    - Максимальная задержка: 949 мс
    - Минимальная задержка: 232 мс
    - Запросов в секунду (RPS, Throughput в JMeter): 15.3
    - Стандартное отклонение (Sd Dev) - 141.72
    - Всего запросов: 100 за 6 секунд
    - Ошибки: 0

Вывод:  После наполнения базы 100.000 записей производительность чтения снизилась, что указывает на необходимые оптимизации:
1. Индексы в БД
2. Кэширование часто запрашиваемых данных

